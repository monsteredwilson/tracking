"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.codesRoutes = void 0;
const express_1 = require("express");
const ensureTokenIsValid_middleware_1 = require("../middlewares/ensureTokenIsValid.middleware");
const codes_controllers_1 = require("../controllers/codes.controllers");
const validate_middleware_1 = require("../middlewares/validate.middleware");
const codes_schema_1 = require("../schemas/codes.schema");
const verifyCredits_middleware_1 = require("../middlewares/verifyCredits.middleware");
const ensureCodesExists_middleware_1 = require("../middlewares/ensureCodesExists.middleware");
const ensureCodesNotBought_middleware_1 = require("../middlewares/ensureCodesNotBought.middleware");
exports.codesRoutes = (0, express_1.Router)();
exports.codesRoutes.post('', (0, validate_middleware_1.validateDataMiddleware)(codes_schema_1.filterSchema), ensureTokenIsValid_middleware_1.ensureTokenIsValidMiddleware, codes_controllers_1.showCodesController);
exports.codesRoutes.patch('', (0, validate_middleware_1.validateDataMiddleware)(codes_schema_1.buyCodeSchemaRequest), ensureTokenIsValid_middleware_1.ensureTokenIsValidMiddleware, ensureCodesExists_middleware_1.ensureCodesExistsMiddleware, ensureCodesNotBought_middleware_1.ensureCodesNotBoughtMiddleware, verifyCredits_middleware_1.verifyCreditsMiddleware, codes_controllers_1.buyCodesController);
exports.codesRoutes.get('', ensureTokenIsValid_middleware_1.ensureTokenIsValidMiddleware, codes_controllers_1.retrieveCodesUserController);
